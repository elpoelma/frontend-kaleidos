<Auk::Modal>
  <Auk::Modal::Header
    @title={{t "new-agenda"}}
    @closeAble={{true}}
    @onClose={{@onCancel}}
  />
  <Auk::Modal::Body>
    <Utils::KindSelector
      data-test-new-session-kind={{true}}
      @setAction={{this.setKind}}
    />
    {{#if this.isAnnexMeeting}}
      <div class="auk-u-mb-2">
        <div class="auk-form-group">
          <Auk::Label>{{t "related-main-meeting-field-label"}}</Auk::Label>
          <Utils::ModelSelector
            data-test-new-session-related-main-meeting
            @modelName="meeting"
            @searchField="numberRepresentation"
            @propertyToShow="label"
            @sortField="-planned-start"
            @selectedItems={{this.selectedMainMeeting}}
            @selectModel={{this.selectMainMeeting}}
          />
        </div>
      </div>
    {{else}}
      <div class="auk-u-mb-2">
        <div class="auk-form-group" data-test-new-session-datepicker>
          <Auk::Label>{{t "start-date"}}</Auk::Label>
          {{! TODO: Replace this with Auk::Datepicker, which isn't fully compliant yet (e.g. no time support) }}
          <WebComponents::VlDatepicker
            @enableTime={{true}}
            @defaultHour={{10}}
            @defaultMinute={{0}}
            @dateChanged={{this.selectStartDate}}
          />
        </div>
      </div>
    {{/if}}
    <div class="auk-u-mb-2">
      <div class="auk-form-group">
        <Auk::Label for="meetingNumberInput">{{t "meeting-number"}}</Auk::Label>
        <div class="auk-o-flex">
          {{#unless this.isAnnexMeeting}}
            <Auk::Input
              data-test-new-session-meeting-number
              @type="number"
              @value={{this.meetingNumber}}
              id="meetingNumberInput"
              disabled={{this.initializeMeetingNumber.isRunning}}
              @width="medium"
              class="auk-u-mr-2"
            />
          {{/unless}}
          <div class="auk-o-flex__item">
            <div
              data-test-new-session-number-representation-view
              class="auk-u-text-line-height--xsmall"
            >
              {{this.formattedMeetingIdentifier}}
            </div>
            <Auk::ButtonLink
              data-test-new-session-number-representation-edit
              disabled={{this.initializeMeetingNumber.isRunning}}
              {{on "click" this.toggleEditingFormattedMeetingIdentifier}}
            >
              <small>{{t "edit"}}</small>
            </Auk::ButtonLink>
          </div>
        </div>
      </div>
      {{#if this.isEditingFormattedMeetingIdentifier}}
        <div class="auk-o-flex">
          <Auk::Input
            @width="medium"
            @value={{this.formattedMeetingIdentifier}}
            class="auk-u-mr-2"
            data-test-new-session-number-representation-input
          />
          <Auk::Button
            @skin="primary"
            {{on "click" this.toggleEditingFormattedMeetingIdentifier}}
            data-test-new-session-number-representation-save
          >
            {{t "save"}}
          </Auk::Button>
        </div>
      {{/if}}
    </div>
    {{#unless this.isAnnexMeeting}}
      <div class="auk-u-mb-2">
        <div class="auk-form-group">
          <Auk::Label>{{t "meeting-location"}}</Auk::Label>
          <Auk::Input
            @block={{true}}
            @value={{this.extraInfo}}
            data-test-new-session-meeting-location
          />
        </div>
      </div>
    {{/unless}}
  </Auk::Modal::Body>
  <Auk::Modal::Footer @onCancel={{@onCancel}}>
    <Auk::Button
      @skin="primary"
      {{on "click" (perform this.createMeeting)}}
      disabled={{this.createMeeting.isRunning}}
      data-test-new-session-save
    >
      {{t "add"}}
    </Auk::Button>
  </Auk::Modal::Footer>
</Auk::Modal>