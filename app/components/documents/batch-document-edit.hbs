<div {{did-update (perform this.loadData) @pieces}}>
  {{#if this.loadData.isRunning}}
    <WebComponents::VlLoader @text={{t "documents-loading-text"}} />
  {{else}}
    <div class="auk-box">
      <div class="auk-u-mb-4">
        <table class="auk-table">
          <thead>
            <tr>
              <th class="auk-table__col--4">
                <WebComponents::AuLabel>
                  {{t "document-name"}}
                </WebComponents::AuLabel>
              </th>
              <th class="auk-table__col--3">
                <WebComponents::AuLabel>
                  {{t "file-type"}}
                </WebComponents::AuLabel>
              </th>
              <th class="auk-table__col--3">
                <WebComponents::AuLabel>
                  {{t "publicity"}}
                </WebComponents::AuLabel>
              </th>
              <th class="auk-table__col--1">
                <WebComponents::AuLabel>
                  {{t "confidential"}}
                </WebComponents::AuLabel>
              </th>
              <th class="auk-table__col--1"></th>
            </tr>
          </thead>
          <tbody>
            {{#each this.sortedDocumentHistories as |history|}}
              {{#unless history.lastPiece.softDeleted}}
                <Documents::EditDocumentRow
                  @piece={{history.lastPiece}} />
              {{/unless}}
            {{/each}}
          </tbody>
        </table>
      </div>
      <WebComponents::AuToolbar>
        <WebComponents::AuToolbar::Group @position="right">
          <WebComponents::AuToolbar::Item>
            <button type="button" class="auk-button-link" {{on "click" (perform this.cancelEditPieces)}}>
              {{t "cancel"}}
            </button>
          </WebComponents::AuToolbar::Item>
          <WebComponents::AuToolbar::Item>
            <WebComponents::VlSaveButton
              @text={{t "save"}}
              @isLoading={{this.saveEditPieces.isRunning}}
              @saveAction={{perform this.saveEditPieces}} />
          </WebComponents::AuToolbar::Item>
        </WebComponents::AuToolbar::Group>
      </WebComponents::AuToolbar>
    </div>
  {{/if}}
</div>