{{#if this.isLoading}}
  <div class="auk-loader" role="alert" aria-busy="true"></div>
{{else}}
  {{#if (not this.isEditing)}}
    {{#if this.canEdit}}
    <span class="au-c-pill-container">
      <AuPill
        @skin="ongoing"
        @icon={{this.pillIcon}}
        @draft={{if (and (and (eq @isFinal false) (eq @isNew true))(or (eq this.accessLevelLabel "Ministerraad")(eq this.accessLevelLabel "Intern Overheid")(eq this.accessLevelLabel "Intern Regering")(eq this.accessLevelLabel "Publiek"))) true}}
        data-test-access-level-pill
      >
        {{this.accessLevelLabel}}
      </AuPill>
      {{#if this.canEdit}}
      <button class="au-c-pill-action au-c-pill--ongoing" type="button" {{on "click" this.openEditMode}}>
        <AuIcon @icon="pencil" />
        <span class="au-u-hidden-visually">Edit</span>
      </button>
      {{/if}}
    </span>
    {{else}}
    <AuPill
      @skin="ongoing"
      @draft={{if (or (eq this.accessLevelLabel "Ministerraad")(eq this.accessLevelLabel "Intern Overheid")) true}}
      @icon={{this.pillIcon}}
      data-test-access-level-pill
    >
      {{this.accessLevelLabel}}
    </AuPill>
    {{/if}}
  {{else}}
    <div class="auk-u-maximize-width">
      <Utils::ModelSelector
        @modelName="access-level"
        @propertyToShow="label"
        @sortField="priority"
        @selectedItems={{@accessLevel}}
        @selectModel={{this.changeAccessLevel}}
        data-test-access-level-pill-selector
      />
    </div>
    <Auk::Button
      @skin="tertiary"
      @layout="icon-only"
      @icon="check"
      @size="tiny"
      {{on "click" (perform this.confirmChangeAccessLevel @accessLevel)}}
      data-test-access-level-pill-save
    />
    <Auk::Button
      @skin="tertiary"
      @layout="icon-only"
      @icon="x"
      @size="tiny"
      {{on "click" (perform this.cancelChangeAccessLevel)}}
      data-test-access-level-pill-cancel
    />
  {{/if}}
{{/if}}