{{#if
  (or
    this.loadDecision.isRunning
    this.loadStatus.isRunning
  )
}}
  <Auk::Loader />
{{else}}
  {{!TODO: use @actionable-attribute status pill when ready}}
  <Auk::StatusPill @status={{this.statusPillKey}}>
    {{this.publicationStatus.label}}
    {{#if @showStatusChangeDate}}
      -
      {{moment-format @publicationFlow.publicationStatusChange.startedAt "YYYY-MM-DD"}}
    {{/if}}
  </Auk::StatusPill>
  {{#if @isEditable}}
    <Auk::ButtonLink
      @icon="pencil"
      @skin="muted"
      @size="small"
      @disabled={{and
        this.publicationStatus.isPublished
        this.decision.isStaatsbladResource
      }}
      {{on "click" this.openStatusSelector}}
    >
      {{t "edit-status"}}
    </Auk::ButtonLink>
  {{/if}}
{{/if}}

{{#if this.showStatusSelector}}
  <Publications::PublicationStatusModal
    @publicationStatus={{this.publicationStatus}}
    @onSave={{perform this.savePublicationStatus}}
    @onCancel={{this.closeStatusSelector}}
  />
{{/if}}
