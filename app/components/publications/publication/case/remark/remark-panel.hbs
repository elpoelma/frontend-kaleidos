<div class="auk-u-mb-3">
  {{#if (not this.isInEditMode)}}
    <Auk::Panel>
      <Auk::Panel::Header>
        <Auk::Toolbar>
          <Auk::Toolbar::Group @position="left">
            <Auk::Toolbar::Item>
              <h4 class="auk-panel__title">
                {{t "publication-remark"}}
              </h4>
            </Auk::Toolbar::Item>
          </Auk::Toolbar::Group>
          <Auk::Toolbar::Group @position="right">
            <Auk::Toolbar::Item>
              <Auk::Button data-test-remark-view-edit @skin="tertiary" @icon="pencil" @layout="icon-only" {{on "click" this.putInEditMode}}/>
            </Auk::Toolbar::Item>
          </Auk::Toolbar::Group>
        </Auk::Toolbar>
      </Auk::Panel::Header>
      <Auk::Panel::Body>
        {{#if @publicationFlow.remark}}
          {{! The following line is formatted on a single line because of the way browsers treat whitespaces & breaks in combination with `white-space: pre-wrap` }}
          <div data-test-remark-view-long-title class="auk-u-text-prewrap">{{@publicationFlow.remark}}</div>
        {{else}}
          <Auk::EmptyState @message="{{t "publication-remark-empty"}}" />
        {{/if}}
      </Auk::Panel::Body>
    </Auk::Panel>
  {{else}}
      <Auk::Panel class="auk-panel--editing">
      <Auk::Panel::Header>
        <Auk::Toolbar::Group @position="left">
          <Auk::Toolbar::Item>
            <h4 class="auk-panel__title">
              {{t "publication-remark"}}
            </h4>
          </Auk::Toolbar::Item>
        </Auk::Toolbar::Group>
      </Auk::Panel::Header>
      <Auk::Panel::Body>
        <Utils::LoadableContent @isLoading={{this.save.isRunning}} @reserveSpace={{true}}>
          <div class="auk-form-group">
            <Auk::Label>
              {{t "publication-remark"}}
              <Auk::Icon @skin="muted" @name="circle-info">
                <EmberTooltip @tooltipClass="auk-tooltip" @side="bottom">
                  <p>
                    {{t "publication-remark-help"}}
                  </p>
                </EmberTooltip>
              </Auk::Icon>
            </Auk::Label>
            <Auk::Textarea data-test-remark-edit @rows="12" @value={{this.remark}} />
          </div>
        </Utils::LoadableContent>
      </Auk::Panel::Body>
      <Auk::Panel::Footer>
        <Auk::Toolbar>
          <Auk::Toolbar::Group @position="left">
            <Auk::Toolbar::Item>
              <Auk::Button
                data-test-remark-edit-cancel
                @skin="borderless"
                @disabled={{this.save.isRunning}}
                {{on "click" this.cancelEdit}}>
                {{t "cancel"}}
              </Auk::Button>
            </Auk::Toolbar::Item>
          </Auk::Toolbar::Group>
          <Auk::Toolbar::Group @position="right">
            <Auk::Toolbar::Item>
              <Auk::Button
                data-test-remark-edit-save
                @skin="primary"
                @loading={{this.save.isRunning}}
                {{on "click" (perform this.save)}}>
                {{t "save"}}
              </Auk::Button>
            </Auk::Toolbar::Item>
          </Auk::Toolbar::Group>
        </Auk::Toolbar>
      </Auk::Panel::Footer>
    </Auk::Panel>
  {{/if}}
</div>