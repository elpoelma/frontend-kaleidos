<WebComponents::AuModal @size="full-screen-padded">
  <WebComponents::AuModal::Header @title={{ t "documents" }} @closeModal={{@onClose}} />
  <WebComponents::AuModal::Body>
    <Utils::LoadableContent @isLoading={{this.loadPieces.isRunning}}>
      {{!-- template-lint-disable table-groups --}}
      <table class="auk-table auk-table--styled auk-table--bordered">
        <thead>
          <tr>
            <th>{{t "name"}}</th>
            <th>{{t "document-type"}}</th>
            <th>
              {{t "link-publication"}}
            </th>
            <th>
              {{t "publications-number"}}
              <WebComponents::AuIcon @iconSkinColor="muted" @name="info-circle">
                <EmberTooltip @tooltipClass="auk-tooltip" @side="bottom">
                  <p>
                    {{t "batch-document-publication-modal-publication-number-info"}}
                  </p>
                </EmberTooltip>
              </WebComponents::AuIcon>
            </th>
            <th />
          </tr>
        </thead>

        <Documents::DocumentList
          @tag="tbody"
          @pieces={{@pieces}}
          as |pieces|>
          {{#each pieces as |piece|}}
            <Publications::BatchDocumentsPublicationRow
              @piece={{piece}}
              @case={{this.case}}
              @onLinkPublicationFlow={{this.linkPublicationFlow}}
              @onUnlinkPublicationFlow={{this.unlinkPublicationFlow}}
              @onOpenNewPublicationModal={{this.openNewPublicationModal}}
            />
          {{/each}}
        </Documents::DocumentList>
      </table>
    </Utils::LoadableContent>
  </WebComponents::AuModal::Body>
</WebComponents::AuModal>

{{#if this.isOpenNewPublicationModal}}
  <Publications::NewPublicationModal
    @case={{this.case}}
    @agendaItemTreatment={{this.agendaItemTreatment}}
    @onSave={{perform this.saveNewPublication}}
    @onCancel={{this.cancelNewPublication}} />
{{/if}}