<Auk::Panel>
  <Auk::Panel::Header class="{{if this.isEditing 'au-u-background-gray-100'}}">
    <Auk::Toolbar as |Toolbar|>
      <Toolbar.Group @position="left" as |Group|>
        <h4 class="auk-toolbar__title">
          Voorbereidende tekst voor de beslissing
        </h4>
      </Toolbar.Group>
      <Toolbar.Group @position="right" as |Group|>
        <Group.Item>
          {{!-- <AuLink
            @route="export.decision"
            @icon="pdf"
            @skin="naked"
            target="_blank"
            rel="noopener noreferrer"
          >
            Exporteren als pdf
          </AuLink> --}}
          {{#if this.document}}
          <AuButton
            @icon="pdf"
            @skin="naked"
            {{on "click" this.showVersion}}
          >
            Exporteren als pdf
          </AuButton>
          {{else}}
          <AuButton
            @icon="pdf"
            @skin="naked"
            {{on "click" this.showDocument}}
          >
            Exporteren als pdf
          </AuButton>
          {{/if}}
        </Group.Item>
        {{#unless this.isEditing}}
        <Group.Item>
          <AuButton
            @skin="naked"
            @icon="pencil"
            @iconAlignment="left"
            {{on "click" this.toggleEdit}}
          >
            Wijzigen
          </AuButton>
        </Group.Item>
        {{/unless}}
      </Toolbar.Group>
    </Auk::Toolbar>
  </Auk::Panel::Header>
  {{#if this.document}}
  <Auk::Panel::Body class="{{if this.isEditing 'au-u-background-gray-100'}}">
    <div
      class="vlc-document-card"
    >
      <div class="vlc-document-card__summary">
        <div class="vlc-document-card__content">
          <Auk::Toolbar @auto={{true}} as |Toolbar|>
            <Toolbar.Group @position="left" as |Group|>
              <Group.Item>
                <Auk::Badge @skin="success" @icon="document-added" @size="large" />
              </Group.Item>
              <Group.Item class="auk-u-maximize-width">
                <div class="auk-o-flex auk-o-flex--vertical-center auk-o-flex--spaced">
                  <span data-test-document-card-type class="auk-overline">
                    Beslissing
                  </span>
                  <span class="auk-overline">
                    01-02-2023
                  </span>
                  <span class="auk-overline">
                    PDF
                  </span>
                </div>
                <LinkTo 
                  @route="export.decision"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="auk-h4 au-u-flex au-u-flex--vertical-center au-u-flex--spaced-tiny">
                  DOC.02032 — Voorbereidende tekst voor de beslissing
                </LinkTo>
              </Group.Item>
            </Toolbar.Group>
            <Toolbar.Group @position="right" as |Group|>
              <Group.Item>
                {{#if (or this.signatureRequested @signatureMockupAlt)}}
                <SignaturePill
                  @isEditable={{true}}
                  @signatureMockupAlt={{@signatureMockupAlt}}
                />
                {{else if (or this.signatureRequested @signatureMockup)}}
                <SignaturePill
                  @isEditable={{true}}
                  @signatureMockup={{@signatureMockup}}
                />
                {{else}}
                {{/if}}
              </Group.Item>
              <Group.Item>
                <AuDropdown
                  data-test-document-card-actions={{true}}
                  @icon="three-dots"
                  @title={{t "more"}}
                  @hideText={{true}}
                  @disabled={{this.loadPieceRelatedData.isRunning}}
                  @alignment="right"
                >
                  <AuButton
                    @skin="link"
                    role="menuitem"
                  >
                    {{#if (eq this.signatureRequested true)}}
                      Verwijderen van handtekenen
                    {{else}}
                      Aanbieden voor handtekenen 
                    {{/if}}
                  </AuButton>
                  <AuButton
                    data-test-document-card-delete
                    @skin="link"
                    @alert={{true}}
                    role="menuitem"
                  >
                    {{t "document-delete"}}
                  </AuButton>
                </AuDropdown>
              </Group.Item>
            </Toolbar.Group>
          </Auk::Toolbar>
        </div>
      </div>
      {{#if this.version}}
      <div class="vlc-document-card-versions">
        <Auk::Accordion>
          <Auk::Accordion::Item
            @title={{t "previous-versions"}}
            @disabled={{this.loadPieceRelatedData.isRunning}}
            @expandTask={{this.loadVersionHistory}}
            data-test-document-card-version-history
          >
            {{#if this.loadVersionHistory.isRunning}}
              <div class="auk-u-p-3">
                <Auk::Loader />
              </div>
            {{else}}
              <div
                class="vlc-document-holder"
              >
                <div class="vlc-document-card-item">
                  <div class="vlc-document-card-item__title">
                    <LinkTo @route="document" @model={{piece.id}}
                      class="auk-h4 auk-u-m-0 auk-u-mr-4 vlc-document-card-item__title-link">
                      DOC.02032 — Voorbereidende tekst voor de beslissing
                    </LinkTo>
                    <div class="auk-o-flex auk-o-flex--spaced auk-o-flex--vertical-center">
                      <AuPill @icon="sign">Getekend</AuPill>
                    </div>
                  </div>
                  <div class="vlc-document-card-item__meta au-u-muted">
                    {{!-- no piece.created in legacy data --}}
                    {{#if piece.created}}
                      {{t "uploaded-at"}}
                      {{moment-format piece.created}}
                      {{t "at"}}
                      {{moment-format piece.created "HH:mm"}}
                    {{/if}}
                  </div>
                  <div class="vlc-document-card-item__icon">
                    <Auk::Icon @name="clock-rewind" @size="small" />
                  </div>
                </div>
              </div>
            {{/if}}
          </Auk::Accordion::Item>
        </Auk::Accordion>
      </div>
      {{/if}}
    </div>
  </Auk::Panel::Body>
  {{/if}}
  <Auk::Panel::Body class="{{if this.isEditing 'au-u-background-gray-100'}}">
    <Auk::Toolbar @auto={{true}} as |Toolbar|>
      <Toolbar.Group @position="left" as |Group|>
        <Group.Item class="auk-content">
          <h4 class="auk-u-mb-2">{{t "result-decision"}}</h4>
          {{#if (not this.isEditingPill)}}
            <Decision::DecisionResultPill
              @decisionResultCode={{@decisionActivity.decisionResultCode}}
              @isEditable={{user-may "manage-decisions"}}
              @onEdit={{this.toggleEditPill}}
            />
          {{else}}
            <Agenda::Agendaitem::AgendaitemDecisionEdit
              @decisionActivity={{@decisionActivity}}
              @onSave={{perform this.updateAgendaitemPiecesAccessLevels}}
              @onCancel={{this.toggleEditPill}}
            />
          {{/if}}
        </Group.Item>
      </Toolbar.Group>
    </Auk::Toolbar>
  </Auk::Panel::Body>
  <Auk::Panel::Body class="au-o-flow {{if this.isEditing 'au-u-background-gray-100'}}">
    {{#if this.isEditing}}
    <div class="auk-rdfa-holder {{if this.isFullscreen "auk-rdfa-fullscreen au-u-margin-top-none"}}">
      <div class="auk-rdfa-holder__header au-u-flex au-u-flex--between au-u-flex--vertical-center">
        {{#if this.isFullscreen}}
          <div class="au-u-flex au-u-flex--spaced-tiny au-u-flex--vertical-center">
            <h4 class="auk-toolbar__title">
              Voorbereidende tekst voor de beslissing: betreft
            </h4>
            <AuButton @skin="link" @icon="renew">Inhoud updaten</AuButton>
            <AuDropdown
              @title="Huidige versie"
              @alignment="left"
              @skin="naked"
              @icon="chevron-down"
              @iconAlignment="right"
            >
              <AuButton @skin="link-secondary" role="menuitem">
                Versie van 18-11-2022 om 10:23
              </AuButton>
              <AuButton @skin="link-secondary" role="menuitem">
                Versie van 13-11-2022 om 12:13
              </AuButton>
            </AuDropdown>
          </div>
          <AuButtonGroup>
            <AuButton
              @skin="naked"
              @icon="minimize"
              @iconAlignment="left"
              {{on "click" this.toggleFullscreen}}
            >
              {{t "close-fullscreen"}}
            </AuButton>
            <AuButton
              @skin="primary"
              {{on "click" this.toggleAll}}
            >
              {{t "save"}}
            </AuButton>
          </AuButtonGroup>
        {{else}}
          <div class="au-u-flex au-u-flex--spaced-tiny au-u-flex--vertical-center">
             <AuButton @skin="link" @icon="renew" class="au-u-padding-left-none">Inhoud updaten</AuButton>
            <AuDropdown
              @title="Huidige versie"
              @alignment="left"
              @skin="naked"
              @icon="chevron-down"
              @iconAlignment="right"
            >
              <AuButton @skin="link-secondary" role="menuitem">
                Versie van 18-11-2022 om 10:23
              </AuButton>
              <AuButton @skin="link-secondary" role="menuitem">
                Versie van 13-11-2022 om 12:13
              </AuButton>
            </AuDropdown>
          </div>
          <AuButton
            @skin="naked"
            @icon="expand"
            @iconAlignment="left"
            {{on "click" this.toggleFullscreen}}
          >
            {{t "fullscreen"}}
          </AuButton>
        {{/if}}
      </div>
      <WebComponents::VlRdfaEditor
        data-test-newsletter-edit-item-rdfa-editor
        @handleRdfaEditorInit={{this.handleRdfaEditorInit}}
      />
    </div>
    <div class="auk-rdfa-holder {{if this.isFullscreen "auk-rdfa-fullscreen au-u-margin-top-none"}}">
      <div class="auk-rdfa-holder__header au-u-flex au-u-flex--between au-u-flex--vertical-center">
        {{#if this.isFullscreen}}
          <div class="au-u-flex au-u-flex--spaced-tiny au-u-flex--vertical-center">
            <h4 class="auk-toolbar__title">
              Voorbereidende tekst voor de beslissing: beslissing
            </h4>
            <AuButton @skin="link" @icon="renew">Inhoud updaten</AuButton>
            <AuDropdown
              @title="Huidige versie"
              @alignment="left"
              @skin="naked"
              @icon="chevron-down"
              @iconAlignment="right"
            >
              <AuButton @skin="link-secondary" role="menuitem">
                Versie van 18-11-2022 om 10:23
              </AuButton>
              <AuButton @skin="link-secondary" role="menuitem">
                Versie van 13-11-2022 om 12:13
              </AuButton>
            </AuDropdown>
          </div>
          <AuButtonGroup>
            <AuButton
              @skin="naked"
              @icon="minimize"
              @iconAlignment="left"
              {{on "click" this.toggleFullscreen}}
            >
              {{t "close-fullscreen"}}
            </AuButton>
            <AuButton
              @skin="primary"
              {{on "click" this.toggleAll}}
            >
              {{t "save"}}
            </AuButton>
          </AuButtonGroup>
        {{else}}
          <div class="au-u-flex au-u-flex--spaced-tiny au-u-flex--vertical-center">
             <AuButton @skin="link" @icon="renew" class="au-u-padding-left-none">Inhoud updaten</AuButton>
            <AuDropdown
              @title="Huidige versie"
              @alignment="left"
              @skin="naked"
              @icon="chevron-down"
              @iconAlignment="right"
            >
              <AuButton @skin="link-secondary" role="menuitem">
                Versie van 18-11-2022 om 10:23
              </AuButton>
              <AuButton @skin="link-secondary" role="menuitem">
                Versie van 13-11-2022 om 12:13
              </AuButton>
            </AuDropdown>
          </div>
          <AuButton
            @skin="naked"
            @icon="expand"
            @iconAlignment="left"
            {{on "click" this.toggleFullscreen}}
          >
            {{t "fullscreen"}}
          </AuButton>
        {{/if}}
      </div>
      <WebComponents::VlRdfaEditor
        data-test-newsletter-edit-item-rdfa-editor
        @handleRdfaEditorInit={{this.handleRdfaEditorInitBody}}
      />
    </div>
    {{!-- <div>
      <AuToggleSwitch
        @label="Ondertekend"
        @identifier="signature"
        @name="signature"
        @checked={{if (eq this.isSigned true) "true" ""}}
        {{on "click" this.toggleSigned}}
      />
    </div> --}}
    {{else}}
    {{!-- <AuAlert
      @title="Nog geen tekst toegevoegd"
      @icon="circle-info"
      @skin="info"
      @size="small"
      @closable={{false}}
    /> --}}
    <AuContent @size="small">
      <h4>Betreft :</h4>
      <p>Toegang havens<br/>Voorontwerp van koninklijk besluit betreffende het verbieden van toegang tot de Belgische havens door gesanctioneerde schepen<br/>Betrokkenheid van de Vlaamse Regering<br/>Standpuntbepaling<br/>(VR 2022 3009 DOC.1056/1 en DOC.1056/2)</p> 
      <h4>Beslissing :</h4>
      <p>De Vlaamse Regering beslist:</p>
      <ol><li>in te stemmen met bovengenoemd voorontwerp van koninklijk besluit;</li><li>de minister-president van de Vlaamse Regering te gelasten de federale minister van Noordzee van deze beslissing in kennis te stellen.</li></ol>
    </AuContent>
    {{!-- <p>
      {{#if this.isSigned}}
      <AuPill @icon="sign" @size="small" @skin="success">Getekend</AuPill>
      {{else}}
      <AuPill @icon="no-sign" @size="small">Niet getekend</AuPill>
      {{/if}}
    </p> --}}
    {{/if}}
  </Auk::Panel::Body>
  {{#if this.isEditing}}
    <Auk::Panel::Footer class="au-u-background-gray-100">
      <Auk::Toolbar>
        <Auk::Toolbar::Group @position="left">
          <Auk::Toolbar::Item>
            <AuButton
              @skin="naked"
              {{on "click" this.toggleEdit}}
            >
              {{t "cancel"}}
            </AuButton>
          </Auk::Toolbar::Item>
        </Auk::Toolbar::Group>
        <Auk::Toolbar::Group @position="right">
          <Auk::Toolbar::Item>
            <AuButton
              @skin="primary"
              {{on "click" this.toggleEdit}}
            >
              {{t "save"}}
            </AuButton>
          </Auk::Toolbar::Item>
        </Auk::Toolbar::Group>
      </Auk::Toolbar>
    </Auk::Panel::Footer>
  {{/if}}
</Auk::Panel>
