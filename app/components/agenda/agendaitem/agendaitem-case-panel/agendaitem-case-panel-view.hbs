<div class="auk-u-mb-4">
  <Auk::Panel>
    <Auk::Panel::Header>
      <Auk::Toolbar as |Toolbar|>
        <Toolbar.Group @position="left" as |Group|>
          <Group.Item>
            <div class="au-u-flex au-u-flex--spaced-small">
              <h4 class="auk-panel__title">
                {{#if (is-announcement @agendaitem.type)}}
                  {{t "text"}}
                {{else}}
                  {{t "note"}}
                {{/if}}
              </h4>
              {{#if @subcase.confidential}}
                <AuPill
                  @size="small"
                  @skin="warning"
                  @icon="lock-closed"
                  data-test-agendaitem-titles-confidential
                >
                  {{t "limited-access"}}
                </AuPill>
              {{/if}}
            </div>
          </Group.Item>
        </Toolbar.Group>
        <Toolbar.Group @position="right" as |Group|>
          <Group.Item>
            <AuButtonGroup>
              {{#if @subcase}}
                <AuLink
                  data-test-agendaitem-titles-link-to-subcase={{true}}
                  @skin="button-naked"
                  @icon="external"
                  @iconAlignment="right"
                  @disabled={{this.loadCase.isRunning}}
                  @route="cases.case.subcases.subcase.index"
                  @models={{array this.decisionmakingFlow.id @subcase.id}}
                >
                  Dossier wijzigen
                </AuLink>
              {{else}}
                {{#if @allowEditing}}
                  <AuButton
                    data-test-agendaitem-titles-edit
                    @skin="naked"
                    @icon="pencil"
                    {{on "click" @onClickEdit}}
                  >
                    {{t "edit"}}
                  </AuButton>
                {{/if}}
              {{/if}}
            </AuButtonGroup>
          </Group.Item>
        </Toolbar.Group>
      </Auk::Toolbar>
    </Auk::Panel::Header>
    <Auk::Panel::Body>
      <div class="auk-content">
        <h4 data-test-agendaitem-titles-short-title class="auk-u-m-0">
          {{@agendaitem.shortTitle}}
        </h4>
        
        {{#if @agendaitem.title}}
          <div class="auk-u-mb-2">
            <p
              data-test-agendaitem-titles-title
              class="auk-o-flex--inline au-u-margin-bottom-none"
            >
              {{@agendaitem.title}}
            </p>
          </div>
        {{/if}}
        <div class="auk-u-my-4">
          {{yield}}
        </div>
        {{#if (is-announcement @agendaitem.type)}}
          <div class="auk-u-mt-2" data-test-agendaitem-titles-news-item>
            {{#if @newsItem}}
              {{#if @newsItem.inNewsletter}}
                <AuPill @size="small" @skin="border" @icon="website">
                  {{t "on-the-website"}}
                </AuPill>
              {{else}}
                <AuPill @size="small" @skin="border">
                  {{t "not-on-the-website"}}
                </AuPill>
              {{/if}}
            {{else}}
              <AuPill @size="small">
                {{t "no-news-item"}}
              </AuPill>
            {{/if}}
          </div>
        {{else}}
          {{#if @subcase.subcaseName}}
            <div class="auk-u-mt-2">
              <AuPill @size="small" data-test-agendaitem-subcase-name>
                {{capitalize @subcase.subcaseName}}
              </AuPill>
            </div>
          {{/if}}
          {{#if this.decisionActivity.isPostponed}}
            <div class="auk-u-mt-2">
              <AuPill @size="small">
                {{t "postponed-item"}}
              </AuPill>
            </div>
          {{/if}}
          {{#if this.decisionActivity.isRetracted}}
            <div class="auk-u-mt-2">
              <AuPill @size="small">
                {{t "retracted-item"}}
              </AuPill>
            </div>
          {{/if}}
        {{/if}}
      </div>
    </Auk::Panel::Body>
  </Auk::Panel>
</div>
