{{#if @currentAgenda.status.isDesignAgenda}}
  {{#if
    (or this.isDeletable this.areDecisionActionsEnabled)
  }}
    <WebComponents::AuButtonToolbar>
      <Auk::DropdownMenu
        @label={{t "actions"}}
        class="auk-u-hidden@print"
        data-test-agendaitem-controls-actions={{true}}
      as |Menu|>
        {{#if this.areDecisionActionsEnabled}}
          {{#let this.decisionActivity.decisionResultCode as |resultCode| }}
            {{#if resultCode.isPostponed}}
              <Menu.Item {{on "click" this.resetDecisionResultCode.perform}} data-test-agendaitem-controls-action-postpone-revert>
                {{t "postpone-revert"}}
              </Menu.Item>
            {{else if resultCode.isRetracted}}
              <Menu.Item {{on "click" this.resetDecisionResultCode.perform}}>
                {{t "retract-revert"}}
              </Menu.Item>
            {{else}}
              <Menu.Item {{on "click" this.postponeAgendaitem.perform}} data-test-agendaitem-controls-action-postpone>
                {{t "postpone"}}
              </Menu.Item>
              <Menu.Item {{on "click" this.retractAgendaitem.perform}}>
                {{t "retract"}}
              </Menu.Item>
            {{/if}}
          {{/let}}
        {{/if}}
        {{#if (or this.currentSession.isAdmin (await this.isDeletable))}}
          <Menu.Item
            @skin="danger"
            data-test-agendaitem-controls-action-delete
            {{on "click" this.toggleIsVerifying}}
          >
            {{t "delete"}}
          </Menu.Item>
        {{/if}}
      </Auk::DropdownMenu>
    </WebComponents::AuButtonToolbar>
  {{else}}
    <div class="auk-loader" role="alert" aria-busy="true"></div>
  {{/if}}
{{/if}}

{{#if this.isVerifying}}
  <WebComponents::VlModalVerify
    @title={{t "delete-agendaitem"}}
    @message={{this.deleteWarningText}}
    @cancel={{this.toggleIsVerifying}}
    @verify={{fn this.verifyDelete @agendaitem}}/>
{{/if}}

{{#if this.setDecisionResultCode.isRunning}}
  <WebComponents::VlModal
    @isOverlay={{true}}
    @showCloseButton={{false}}
    @title={{t "saving-decision-result-title"}}
  >
    <Auk::Modal::Body>
      <WebComponents::VlLoader
        @text={{concat
          (t "saving-decision-result-message")
          " "
          (t "please-be-patient")
        }}
      />
    </Auk::Modal::Body>
  </WebComponents::VlModal>
{{/if}}

{{#if this.showLoader}}
  <WebComponents::LoadingOverlay />
{{/if}}