<Auk::Modal @size="medium">
  <Auk::Modal::Header
    @title={{t "add-government-domains-government-fields"}}
    @onClose={{@onCancel}}
  />
  <Auk::Modal::Body>
    <Utils::LoadableContent
      @isLoading={{or this.loadGovernmentAreas.isRunning this.save.isRunning}}
      @reserveSpace={{true}}
    >
      {{!-- Extra loading state test needed here despite the "LoadableContent", since "LoadableContent"
      with @reserveSpace={{true}} already renders while loading anyway (in order to prevent unnecessary modal resizes) --}}
      {{#unless this.loadGovernmentAreas.isRunning}}
        <Auk::Label>{{t "government-domains-government-fields"}}</Auk::Label>
        <Utils::GovernmentAreas::AreaSelector::GovernmentAreaSelectorForm
          @availableFields={{this.governmentFields}}
          @selectedFields={{this.selectedGovernmentFields}}
          @onSelectFields={{this.selectField}}
          @onDeselectFields={{this.deselectField}}
          @selectedDomains={{this.selectedGovernmentDomains}}
          @onSelectDomains={{this.selectDomain}}
          @onDeselectDomains={{this.deselectDomain}}
        />
      {{/unless}}
    </Utils::LoadableContent>
  </Auk::Modal::Body>
  <Auk::Modal::Footer
    @size="large"
    @cancelDisabled={{this.save.isRunning}}
    @onCancel={{@onCancel}}
  >
    <Auk::Button
      data-test-edit-government-fields-modal-save
      @skin="primary"
      @loading={{this.save.isRunning}}
      {{on "click" (perform this.save)}}
    >
      {{t "save"}}
    </Auk::Button>
  </Auk::Modal::Footer>
</Auk::Modal>