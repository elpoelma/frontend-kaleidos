<Auk::CheckboxList
  {{did-update (perform this.calculateDomainSelections) @selectedFields}}
  data-test-government-area-selector-form
>
  {{#each this.domainSelections as |domainSelection index|}}
    {{! template-lint-disable simple-unless }}
    {{#unless (eq index 0)}}
      <hr class="auk-u-my-2"/>
    {{/unless}}
    {{! template-lint-enable simple-unless }}
    <AuControlCheckbox
      data-test-government-area-selector-form-domain
      @checked={{domainSelection.isSelected}}
      @onChange={{fn this.toggleDomainSelection domainSelection}}
    >
      {{domainSelection.domain.label}}
    </AuControlCheckbox>
    <Auk::CheckboxList>
      {{#each domainSelection.availableFields as |field|}}
        <AuControlCheckbox
          data-test-government-area-selector-form-field
          @label={{field.label}}
          @checked={{includes field domainSelection.selectedFields}}
          @onChange={{fn this.toggleFieldSelection field}}
        />
      {{/each}}
    </Auk::CheckboxList>
  {{/each}}
</Auk::CheckboxList>