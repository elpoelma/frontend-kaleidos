{{!-- TODO: octane-refactor --}}
{{!-- template-lint-disable no-action --}}
{{#if (not this.multiSelect)}}
  <PowerSelect
    @options={{this.items}}
    @selected={{this.selectedItems}}
    @disabled={{this.readOnly}}
    @allowClear={{this.allowClear}}
    @searchField={{this.searchField}}
    @placeholder={{this.placeholder}}
    @loadingMessage={{this.loadingMessage}}
    @noMatchesMessage={{this.noMatchesMessage}}
    @searchMessage={{null}}
    @search={{perform this.searchTask}}
    @oninput={{action "resetValueIfEmpty"}}
    @onchange={{action "selectModel"}}
    @searchEnabled={{not this.hideSearch}}
  as |model|>
    {{#if (has-block)}}
      {{yield model}}
    {{else}}
      {{model-property-to-show model this.propertyToShow}}
    {{/if}}
  </PowerSelect>
{{else}}
  <PowerSelectMultiple
    @options={{this.items}}
    @selected={{this.selectedItems}}
    @disabled={{this.readOnly}}
    @searchField={{this.searchField}}
    @placeholder={{this.placeholder}}
    @loadingMessage={{this.loadingMessage}}
    @searchMessage={{null}}
    @noMatchesMessage={{this.noMatchesMessage}}
    @closeOnSelect={{false}}
    @search={{perform this.searchTask}}
    @oninput={{action "resetValueIfEmpty"}}
    @onchange={{action "selectModel"}}
  as |model|>
    {{#if (has-block)}}
      {{yield model}}
    {{else}}
      {{model-property-to-show model this.propertyToShow}}
    {{/if}}
  </PowerSelectMultiple>
{{/if}}