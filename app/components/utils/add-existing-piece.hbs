{{!-- TODO: octane-refactor --}}
{{!-- template-lint-disable no-action --}}
<div class="auk-u-mb-2">
  <Auk::Toolbar @auto={{true}}>
    <Auk::Toolbar::Group @position="left">
      <Auk::Toolbar::Item class="auk-u-maximize-width auk-u-overflow-hidden">
        <div class="vl-input-field--inline">
          <Input
            data-test-add-existing-piece-search-input=""
            id="searchId"
            class="vl-input-field vl-input-field__input"
            placeholder="Zoeken.."
            @value={{this.filter}}
            {{on "input" (perform this.searchTask)}}
          />
          <Auk::Button
            @skin="primary"
            @layout="icon-only"
            @icon="search"
            class="vl-input-field__submit"
            onclick={{perform this.searchTask}}
            data-test-add-existing-piece-search-button
          />
        </div>
      </Auk::Toolbar::Item>
    </Auk::Toolbar::Group>
  </Auk::Toolbar>
  <div>
    {{#if this.performSearch.isRunning}}
      <div class="auk-o-flex auk-o-flex--center auk-u-mt-4">
        <Auk::Loader @message={{t "loading"}} />
      </div>
    {{else}}
      <DataTable
        @content={{this.pieces}}
        @sort={{this.sort}}
        @page={{this.pageParam}}
        @size={{this.size}}
        @noDataMessage={{t "no-results-found"}}
        @isLoading={{this.findAll.isRunning}}
        @onClickRow={{action "select"}}
      as |table|>
        <table.content as |c|>
          <c.header>
            <th></th>
            <th><span class="">{{t "title-document"}}</span></th>
            <th><span class="">{{t "created-on"}}</span></th>
          </c.header>
          <c.body as |row|>
            <td class="auk-table__col--1">
              <Auk::Checkbox
                data-test-add-existing-piece-checkbox={{true}}
                @checked={{row.selected}}
                {{on "input" (action "select" row)}}
              />
            </td>
            <td class="auk-table__col--8">
              {{row.name}}
            </td>
            <td class="auk-table__col--3">
              {{#if row.created}}
                {{moment-format row.created "dd DD/MM/YYYY HH:mm"}}
              {{else}}
                {{t "dash"}}
              {{/if}}
            </td>
          </c.body>
        </table.content>
      </DataTable>
    {{/if}}
  </div>
</div>