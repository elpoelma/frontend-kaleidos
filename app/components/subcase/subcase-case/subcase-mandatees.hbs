{{!-- TODO code duplication with agendaitem-case/agendaitem-mandatees --}}
<div class="auk-u-mb-2">
  <div class="auk-u-flex auk-u-flex--vertical-center">
    <h4 class="auk-h3">
      {{t "manage-ministers-title"}}
    </h4>
    {{#if (and currentSession.isEditor (not isEditing))}}
      <div class="auk-u-ml-2">
        <a href="" data-test-subcase-mandatees-edit class="auk-button-link" {{action "toggleIsEditing"}}>
          {{t "edit"}}
        </a>
      </div>
    {{/if}}
  </div>
</div>
{{#if (not isEditing)}}
  {{#if (is-pending mandateeRows)}}
    {{web-components/vl-loader text=(t "mandatees-loading-text")}}
  {{else if (gt (await mandateeRows.length) 0)}}
    <ul class="vlc-minister-list">
      {{#each mandateeRows as |mandateeRow|}}
        {{web-components/vl-mandatee-link
          data-test-mandatee-link-list-item=true
          mandatee=mandateeRow.mandatee
          fields=mandateeRow.fields
          submitter=mandateeRow.isSubmitter
        }}
      {{/each}}
    </ul>
  {{else}}
    {{web-components/vl-alert message=(t "no-domains-yet")}}
  {{/if}}
{{else}}
  <div class="vlc-box">
    {{cases/subcase-mandatees
      showSelected=true
      mandateeRows=mandateeRows
      isEditing=isEditing
      isAdding=isAdding
    }}
    <div class="vlc-toolbar vlc-toolbar--auto">
      <div class="vlc-toolbar__left">
        <a
          href=""
          data-test-subcase-mandatees-add-mandatee
          class="auk-button auk-button--tertiary"
          {{action "addRow"}}
        >
          <div class="auk-icon auk-icon--default">
            <i class="ki ki-add"></i>
          </div>
          <div class="auk-button__label">
            {{t "add-minister"}}
          </div>
        </a>
      </div>
      <div class="vlc-toolbar__right">
        <WebComponents::AuToolbar>
          <WebComponents::AuToolbar::Group @position="right">
            <WebComponents::AuToolbar::Item>
              <a
                data-test-subcase-mandatees-edit-cancel
                href=""
                class="auk-button auk-button--tertiary"
                {{action "cancelEditing"}}
              >
                {{t "cancel"}}
              </a>
            </WebComponents::AuToolbar::Item>
            <WebComponents::AuToolbar::Item>
              {{web-components/vl-save-button
                text=(t "save")
                isLoading=isLoading
                test-data-vl-save-button=true
                saveAction=(action "saveChanges")
              }}
            </WebComponents::AuToolbar::Item>
          </WebComponents::AuToolbar::Group>
        </WebComponents::AuToolbar>
      </div>
    </div>
  </div>
{{/if}}
