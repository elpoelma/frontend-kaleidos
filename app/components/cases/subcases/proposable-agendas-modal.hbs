<Auk::Modal>
  <Auk::Modal::Header
    @title={{t "agenda-activity"}}
    @closeDisabled={{this.saveSubcase.isRunning}}
    @onClose={{@onCancel}}
  />
  <Auk::Modal::Body>
    <div class="au-c-form">
      <AuFormRow>
        <Auk::Label for="new-subcase-ok">{{t "formal-ok"}}</Auk::Label>
        <AuToggleSwitch
          id="new-subcase-ok"
          @checked={{this.isFormallyOk}}
          @onChange={{fn (mut this.isFormallyOk)}}
        />
      </AuFormRow>
      <AuFormRow>
        <Auk::Label for="remarks">{{t "private-comments-title"}}</Auk::Label>
        <Auk::Textarea @rows="4" @value={{this.privateComment}} id="remarks" />
      </AuFormRow>
      <AuHr />
      <AuFormRow>
        {{#if this.loadAgendas.isRunning}}
          <Auk::Loader @message={{t "loading"}} />
        {{else if this.agendas.length}}
          <table class="auk-table auk-table--striped">
            <thead>
              <tr>
                <th class="auk-table__col--1"></th>
                <th class="auk-table__col--3">{{t "meeting-date"}}</th>
                <th class="auk-table__col--3">{{t "title"}}</th>
                <th class="auk-table__col--5">{{t "kind"}}</th>
              </tr>
            </thead>
            <tbody class="auk-table--clickable-rows">
              {{#each this.agendas as |agenda|}}
                <tr {{on "click" (fn this.selectAgenda agenda)}}>
                  <td class="auk-table__col--1">
                    <AuRadio
                      @checked={{this.isSelectedAgenda agenda}}
                    />
                  </td>
                  <td class="auk-table__col--3">
                    {{date agenda.createdFor.plannedStart}}
                  </td>
                  <td class="auk-table__col--3">
                    <strong>{{t "design-agenda"}}</strong>
                    <AuPill @skin="ongoing" @draft={{true}}>
                      {{agenda.serialnumber}}
                    </AuPill>
                  </td>
                  <td class="auk-table__col--5">
                    {{agenda.createdFor.kind.label}}
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        {{else}}
          <Auk::EmptyState @message={{or @emptyStateMessage (t "no-meetings")}} />
        {{/if}}
      </AuFormRow>
    </div>
  </Auk::Modal::Body>
  <Auk::Modal::Footer
    @cancelDisabled={{this.saveSubcase.isRunning}}
    @onCancel={{@onCancel}}
  >
    <AuButton
      @skin="secondary"
      @disabled={{this.selectedAgenda}}
      @loading={{and this.saveSubcase.isRunning (not this.selectedAgenda)}}
      {{on "click" (perform this.saveSubcase)}}
    >
      {{t "save-without-agenda"}}
    </AuButton>

    <AuButton
      @skin="primary"
      @disabled={{not this.selectedAgenda}}
      @loading={{or
        this.loadAgendas.isRunning
        (and this.saveSubcase.isRunning this.selectedAgenda)
      }}
      {{on "click" (perform this.saveSubcase)}}
    >
      {{t "place-on-agenda"}}
    </AuButton>
  </Auk::Modal::Footer>
</Auk::Modal>