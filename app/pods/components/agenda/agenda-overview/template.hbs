<div class="vlc-agenda-items auk-u-m-8 vlc-agenda-items--spaced">
  <div class="vlc-toolbar vlc-agenda-items-section-header">

    <div class="vlc-toolbar__left">
      <div class="vlc-toolbar__item">
        <h3 class="vl-title--h3 vlc-agenda-items-section-header__title">
          {{t "agendaitems-subtitle"}}
        </h3>
      </div>
    </div>
    <div class="vlc-toolbar__right">
      <div class="vlc-toolbar__item">
        <a href=""
           class="vlc-agenda-items-section-header__link"
           {{on "click" this.toggleChangesOnly}}
        >
          {{#if (not this.isShowingChanges)}}
            {{t "show-changes"}}
          {{else}}
            {{t "show-all"}}
          {{/if}}
        </a>
      </div>
      <div class="vlc-toolbar__item">
        {{#if
          (and
            this.currentSessionService.isEditor
            this.isDesignAgenda
          )
        }}
          <div class="auk-u-ml-2">
            <a href=""
               data-test-agenda-edit-formally-ok-button
               class="vlc-agenda-items-section-header__link"
            >
              {{t "edit"}}
            </a>
          </div>
        {{/if}}
      </div>
    </div>
  </div>

  {{#if (is-empty @notas)}}
    <div class="auk-u-mt-2">
      {{web-components/vl-alert message=(t "no-agendaitems-yet")}}
    </div>
  {{/if}}
  <div class={{this.spacerClass}}>
    {{#if
      (and this.currentSessionService.isEditor this.isDesignAgenda)
    }}
      <ul>
        {{!-- Goedkeuringen vorige vergaderingen --}}
        {{#each this.approvalNotas as |agendaitem|}}
          <li class="vlc-agenda-items__sub-item">
            <Agenda::AgendaOverview::AgendaOverviewItem
              @agendaitem={{agendaitem}}
              @setFormallyOkAction={{fn this.setFormallyOkAction agendaitem}}
              @showFormallyOkStatus={{this.isDesignAgenda}}
            />
          </li>
        {{/each}}
      </ul>

      <SortableGroup
        @tagName="ul"
        @model={{this.groupedNotas}}
        @onChange={{@onReorderAgendaitems}}
        as |sortableGroup|
      >
        {{!-- other notas --}}
        {{#each sortableGroup.model as |agendaitemGroup|}}
          <Agenda::AgendaOverview::AgendaitemGroupHeader @mandatees={{agendaitemGroup.mandatees}}/>
          {{#each agendaitemGroup.agendaitems as |agendaitem|}}
            <sortableGroup.item
              @tagName="li"
              @class="vlc-agenda-items__sub-item"
              @model={{agendaitem}}
              @distance={{30}}
              @handle={{this.dragHandleClass}}
            >
              <Agenda::AgendaOverview::AgendaOverviewItem
                @agendaitem={{agendaitem}}
                @setFormallyOkAction={{fn this.setFormallyOkAction agendaitem}}
                @showFormallyOkStatus={{this.isDesignAgenda}}
              />
            </sortableGroup.item>
          {{/each}}
        {{/each}}
      </SortableGroup>
    {{else}}
      {{!-- Else clause can be avoided once drag & drop can be disabled (bump version) --}}
      <ul>
        {{!-- Goedkeuringen vorige vergaderingen --}}
        {{#each this.approvalNotas as |agendaitem|}}
          <li>
            <Agenda::AgendaOverview::AgendaOverviewItem
              @agendaitem={{agendaitem}}
              @setFormallyOkAction={{fn this.setFormallyOkAction agendaitem}}
              @showFormallyOkStatus={{this.isDesignAgenda}}
            />
          </li>
        {{/each}}
        {{!-- other notas --}}
        {{#each this.groupedNotas as |agendaitemGroup|}}
          <Agenda::AgendaOverview::AgendaitemGroupHeader @mandatees={{agendaitemGroup.mandatees}}/>
          {{#each agendaitemGroup.agendaitems as |agendaitem|}}
            <li class="vlc-agenda-items__sub-item">
              <Agenda::AgendaOverview::AgendaOverviewItem
                @agendaitem={{agendaitem}}
                @setFormallyOkAction={{fn this.setFormallyOkAction agendaitem}}
                @showFormallyOkStatus={{this.isDesignAgenda}}
              />
            </li>
          {{/each}}
        {{/each}}
      </ul>
    {{/if}}
  </div>
  <div class="vlc-agenda-items-section-header">
    <h3 class="vl-title--h3 vlc-agenda-items-section-header__title">
      {{t "announcements-subtitle"}}
    </h3>
  </div>
  <div class="auk-u-mb-4">
    {{#if (gt @announcements.length 0)}}
      {{#if
        (and this.currentSessionService.isEditor this.isDesignAgenda)
      }}
        <SortableGroup
          @tagName="ul"
          @model={{@announcements}}
          @onChange={{@onReorderAgendaitems}}
        as |sortableAnnouncements|>
          {{#each sortableAnnouncements.model as |announcement|}}
            <sortableAnnouncements.item
              @tagName="li"
              @class="vlc-agenda-items__sub-item"
              @model={{announcement}}
              @distance={{30}}
              @handle={{this.dragHandleClass}}
              >
              <Agenda::AgendaOverview::AgendaOverviewItem
                @agendaitem={{announcement}}
                @setFormallyOkAction={{fn this.setFormallyOkAction announcement}}
                @showFormallyOkStatus={{this.isDesignAgenda}}
              />
            </sortableAnnouncements.item>
          {{/each}}
        </SortableGroup>
      {{else}}
        {{#each @announcements as |announcement|}}
          <div class="vlc-agenda-items__sub-item">
            <Agenda::AgendaOverview::AgendaOverviewItem
              @agendaitem={{announcement}}
              @setFormallyOkAction={{fn this.setFormallyOkAction announcement}}
              @showFormallyOkStatus={{this.isDesignAgenda}}
            />
          </div>
        {{/each}}
      {{/if}}
    {{else}}
      <WebComponents::VlAlert @message={{t "no-announcements-yet"}} />
    {{/if}}
  </div>
  {{#if this.showLoader}}
    <WebComponents::AuLoadingOverlay/>
  {{/if}}
</div>