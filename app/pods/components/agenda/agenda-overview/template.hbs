<div class="vlc-agenda-items auk-u-m-8 vlc-agenda-items--spaced">
  {{#if this.isEditingOverview}}
    <ChangesAlert
      @message={{t "editing-agenda-overview"}}
      @buttonText={{t "end-editing-overview"}}
      @clearAction={{this.toggleIsEditingOverview}}
    />
  {{/if}}
  <div class="vlc-toolbar vlc-agenda-items-section-header">
    <div class="vlc-toolbar__left">
      <div class="vlc-toolbar__item">
        <h3 class="vl-title--h3 vlc-agenda-items-section-header__title">
          {{t "agendaitems-subtitle"}}
        </h3>
      </div>
    </div>
    <div class="vlc-toolbar__right">
      <div class="vlc-toolbar__item">
        <WebComponents::AuButtonLink
          class="vlc-agenda-items-section-header__link"
          {{on "click" @toggleShowModifiedOnly}}
        >
          {{if @showModifiedOnly (t "show-all") (t "show-changes")}}
        </WebComponents::AuButtonLink>
      </div>
      <div class="vlc-toolbar__item">
        {{#if
          (and
            this.currentSessionService.isEditor
            this.isDesignAgenda
          )
        }}
          {{#unless this.isEditingOverview}}
            <div class="auk-u-ml-2">
              <WebComponents::AuButtonLink
                class="vlc-agenda-items-section-header__link"
                {{on "click" this.toggleIsEditingOverview}}
              >
                {{t "edit"}}
              </WebComponents::AuButtonLink>
            </div>
          {{/unless}}
        {{/if}}
      </div>
    </div>
  </div>

  {{#if (is-empty @notas)}}
    <div class="auk-u-mt-2">
      {{web-components/vl-alert message=(t "no-agendaitems-yet")}}
    </div>
  {{/if}}
  <div class={{this.spacerClass}}>
    <ul>
      {{!-- Goedkeuringen vorige vergaderingen --}}
      {{#each this.approvalNotas as |agendaitem|}}
        <li class="vlc-agenda-items__sub-item">
          <Agenda::AgendaOverview::AgendaOverviewItem
            @agendaitem={{agendaitem}}
            @currentAgenda={{@currentAgenda}}
            @previousAgenda={{@previousAgenda}}
            @isEditingFormallyOkStatus={{this.isEditingOverview}}
            @setFormallyOkAction={{fn this.setFormallyOkAction agendaitem}}
            @showFormallyOkStatus={{this.isDesignAgenda}}
          />
        </li>
      {{/each}}
    </ul>

    <ul
      {{sortable-group onChange=@onReorderAgendaitems}}
      {{did-update (perform this.groupNotasOnGroupName this.regularNotas) this.regularNotas}}>
      {{!-- other notas --}}
      {{#each this.groupedNotas as |agendaitemGroup|}}
        <Agenda::AgendaOverview::AgendaitemGroupHeader @mandatees={{agendaitemGroup.sortedMandatees}}/>
        {{#each agendaitemGroup.agendaitems as |agendaitem|}}
          <li
            class="vlc-agenda-items__sub-item"
            {{sortable-item
              model=agendaitem
              distance="30"
              handle=this.dragHandleClass
              isDraggingDisabled=(not this.isDraggingEnabled)
            }}
          >
            <Agenda::AgendaOverview::AgendaOverviewItem
              @agendaitem={{agendaitem}}
              @currentAgenda={{@currentAgenda}}
              @previousAgenda={{@previousAgenda}}
              @setFormallyOkAction={{fn this.setFormallyOkAction agendaitem}}
              @showFormallyOkStatus={{this.isDesignAgenda}}
            />
          </li>
        {{/each}}
      {{/each}}
    </ul>
  </div>
  <div class="vlc-agenda-items-section-header">
    <h3 class="vl-title--h3 vlc-agenda-items-section-header__title">
      {{t "announcements-subtitle"}}
    </h3>
  </div>
  <div class="auk-u-mb-4">
    {{#if (gt @announcements.length 0)}}
      <ul {{sortable-group onChange=@onReorderAgendaitems}} >
        {{#each @announcements as |announcement|}}
          <li
            class="vlc-agenda-items__sub-item"
            {{sortable-item
              model=announcement
              distance="30"
              handle=this.dragHandleClass
              isDraggingDisabled=(not this.isDraggingEnabled)
            }}
          >
            <Agenda::AgendaOverview::AgendaOverviewItem
              @agendaitem={{announcement}}
              @currentAgenda={{@currentAgenda}}
              @previousAgenda={{@previousAgenda}}
              @setFormallyOkAction={{fn this.setFormallyOkAction announcement}}
              @showFormallyOkStatus={{this.isDesignAgenda}}
            />
          </li>
        {{/each}}
      </ul>
    {{else}}
      <WebComponents::VlAlert @message={{t "no-announcements-yet"}} />
    {{/if}}
  </div>
  {{#if this.showLoader}}
    <WebComponents::AuLoadingOverlay/>
  {{/if}}
</div>