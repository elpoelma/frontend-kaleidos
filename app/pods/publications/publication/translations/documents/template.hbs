<div class="auk-u-m-4">
  <div class="auk-u-mb-4">
    <WebComponents::AuToolbar>
      <WebComponents::AuToolbar::Group @position="left">
        <WebComponents::AuToolbar::Item>
        <WebComponents::AuButton @skin="secondary" @disabled={{eq this.selectedPieces.length 0}}>
          <WebComponents::AuIcon @name="mail"/>
          {{t "request-translations"}}
        </WebComponents::AuButton>
      </WebComponents::AuToolbar::Item>
        <WebComponents::AuToolbar::Item>
          <WebComponents::AuButton @skin="secondary" {{on "click" this.openPieceUploadModal}} >
            <WebComponents::AuIcon @name="add"/>
            {{t "upload-translation-file"}}
          </WebComponents::AuButton>
        </WebComponents::AuToolbar::Item>

      </WebComponents::AuToolbar::Group>
    </WebComponents::AuToolbar>
    {{#if this.model}}
      <table class="auk-table">
        <thead>
          <tr>
            <th class="auk-table-checkbox-col">
              <WebComponents::AuCheckbox @mode="table" @toggle={{this.changeAllPiecesSelection}}
                                       @checked={{this.areAllPiecesSelected}} />
            </th>
            <th class="auk-u-text-nowrap">{{t "name-document"}}</th>
            <th class="auk-u-text-nowrap">{{t "file-extension"}}</th>
            <th class="auk-u-text-nowrap">{{t "received-at"}}</th>
            <th class="auk-u-text-nowrap">{{t "uploaded-at"}}</th>
            <th class="auk-u-text-nowrap">{{t "for-publishpreview"}}</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {{#each this.model as |piece|}}
            <tr class="auk-table__row">
              <td class="auk-table-checkbox-col">
                <WebComponents::AuCheckbox @mode="table" @toggle={{fn this.changePieceSelection piece}}
                                         @checked={{includes piece this.selectedPieces}} />
              </td>
              <td class="auk-u-text-nowrap">
                {{piece.name}}
              </td>
              <td >
                <WebComponents::AuPill class="auk-pill--white">
                  {{piece.file.extension}}
                </WebComponents::AuPill>
              </td>
              <td class="auk-u-text-nowrap">
                {{t "dash"}}
              </td>
              <td class="auk-u-text-nowrap">
                {{moment-format piece.created}}
                <br>
                <span class="auk-u-muted auk-u-text-small">{{moment-format piece.created "HH:mm"}}</span>
              </td>
              <td class="auk-u-text-align--center">
                {{t "dash"}}
              </td>
              <td>
                <WebComponents::AuButtonToolbar>
                  <Auk::Button
                    @layout="icon-only"
                    @icon="download"
                    @skin="borderless"
                    @href={{piece.file.namedDownloadLink}}
                    download
                  />
                  <Auk::Button
                    @layout="icon-only"
                    @icon="book"
                    @skin="borderless"
                    @href={{piece.viewDocumentURL}}
                    target="_blank"
                  />
                </WebComponents::AuButtonToolbar>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    {{else}}
      <WebComponents::AuPanel>
        <WebComponents::AuPanel::Body>
          <Auk::EmptyState @message={{t "no-documents-yet" }} />
        </WebComponents::AuPanel::Body>
      </WebComponents::AuPanel>
    {{/if}}
  </div>
</div>

{{#if this.showPieceUploadModal}}
  <Publications::Publication::Translations::DocumentsUploadModal
    @translationSubcase={{this.translationSubcase}}
    @onSave={{perform this.saveAndLinkPieces}}
    @onCancel={{this.closePieceUploadModal}} />
{{/if}}