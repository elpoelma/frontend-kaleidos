<div class="auk-u-m-4">
  <Publications::Publication::Translations::TranslationsInfoPanel
    @translationSubcase={{this.translationSubcase}}
    @isFinal={{this.publicationFlow.status.isFinal}}
  />

  <div class="auk-u-mt-4">
    <Auk::Panel>
      <Auk::Panel::Header>
        <Auk::Toolbar>
          <Auk::Toolbar::Group @position="left">
            <Auk::Toolbar::Item>
              <h4 class="auk-panel__title">
                {{t "translations"}}
              </h4>
            </Auk::Toolbar::Item>
          </Auk::Toolbar::Group>
          <Auk::Toolbar::Group @position="right">
            <Auk::Toolbar::Item>
              <Auk::Button
                @skin="secondary"
                @icon="plus"
                @disabled={{this.isTranslationUploadDisabled}}
                {{on "click" this.openTranslationUploadModal }}
              >
                {{t "upload-translation"}}
              </Auk::Button>
            </Auk::Toolbar::Item>
            <Auk::Toolbar::Item>
              <Auk::Button
                @skin="primary"
                @icon="plus"
                @disabled={{this.isRequestingDisabled}}
                {{on "click" this.openTranslationRequestModal}}
              >
                {{t "request-translations"}}
              </Auk::Button>
            </Auk::Toolbar::Item>
          </Auk::Toolbar::Group>
        </Auk::Toolbar>
      </Auk::Panel::Header>
      <Auk::Panel::Body class="auk-u-bg-alt">
        {{#each this.model as |translationRow|}}
          {{#if translationRow.requestActivity}}
            <Publications::Publication::Translations::TranslationRequestedPanel
              @translationSubcase={{this.translationSubcase}}
              @requestActivity={{translationRow.requestActivity}}
              @onDeleteRequest={{fn (perform this.deleteRequest) translationRow.requestActivity}}
            />
          {{else if translationRow.piece}}
            <Publications::Publication::Translations::TranslationReceivedPanel
              @translationSubcase={{this.translationSubcase}}
              @piece={{translationRow.piece}}
            />
          {{/if}}
        {{else}}
          <Auk::EmptyState
            @bordered={{true}}
            @message={{t "no-translations-yet"}}
          />
        {{/each}}
      </Auk::Panel::Body>
    </Auk::Panel>
  </div>
</div>

{{#if this.showTranslationRequestModal}}
  <Publications::Publication::Translations::TranslationRequestModal
    @dueDate={{this.translationSubcase.dueDate}}
    @publicationNumber={{this.publicationFlow.identification.idName}}
    @onSave={{perform this.saveTranslationRequest}}
    @onCancel={{this.closeTranslationRequestModal}}
  />
{{/if}}

{{#if this.showTranslationUploadModal}}
  <Publications::Publication::Translations::TranslationUploadModal
    @publicationNumber={{this.publicationFlow.identification.idName}}
    @onSave={{perform this.saveTranslationUpload}}
    @onCancel={{this.closeTranslationUploadModal}}
  />
{{/if}}