{{page-title (t "newsletter-info")}}
<div class="auk-o-grid au-o-grid--stretch">
  <div class="auk-o-grid-col-2 au-c-sidebar">
    <div class="au-c-sidebar__content">
      <AuHeading @level="3" @skin="6" class="au-u-hidden-visually">Inhoud</AuHeading>
      <ul class="au-c-list-navigation">
        <li class="au-c-list-navigation__item">
          <AuNavigationLink
            @route="search-future.all"
          >
            Alle inhoud
          </AuNavigationLink>
        </li>
        <li class="au-c-list-navigation__item">
          <AuNavigationLink
            @route="search-future.agenda-items"
          >
            Agendapunt
          </AuNavigationLink>
        </li>
        <li class="au-c-list-navigation__item">
          <AuNavigationLink
            @route="search-future.cases"
          >
            Dossier
          </AuNavigationLink>
        </li>
        <li class="au-c-list-navigation__item">
          <AuNavigationLink
            @route="search-future.documents"
          >
            Document
          </AuNavigationLink>
        </li>
        <li class="au-c-list-navigation__item">
          <AuNavigationLink
            @route="search-future.decisions"
          >
            Beslissing
          </AuNavigationLink>
        </li>
        <li class="au-c-list-navigation__item">
          <AuNavigationLink
            @route="search-future.newsletter-infos"
          >
            Kort bestek
          </AuNavigationLink>
        </li>
        <li class="au-c-list-navigation__item">
          <AuNavigationLink
            @route="search-future.announcements"
          >
            Mededeling
          </AuNavigationLink>
        </li>
      </ul>
      <div class="au-o-box au-o-box--small au-o-flow au-o-flow--tiny">
        <div class="au-c-card au-o-box au-o-box--small au-u-margin-top-small">
          <div class="auk-form-group auk-u-position-relative au-u-margin-bottom-small">
            <Auk::Label>{{t "from"}}</Auk::Label>
            <WebComponents::VlDatepicker
              @selectedDate={{array this.dateFromBuffer}}
              @dateChanged={{fn (mut this.dateFromBuffer)}}
              @enableClear={{this.dateFromBuffer}}
              @onClear={{fn (mut this.dateFromBuffer) null}}
              @allowInput={{true}}
            />
          </div>
          <div class="auk-form-group auk-u-position-relative">
            <Auk::Label>{{t "until-inclusive"}}</Auk::Label>
            <WebComponents::VlDatepicker
              @selectedDate={{array this.dateToBuffer}}
              @dateChanged={{fn (mut this.dateToBuffer)}}
              @enableClear={{this.dateToBuffer}}
              @onClear={{fn (mut this.dateToBuffer) null}}
              @allowInput={{true}}
            />
          </div>
        </div>
        <div class="au-c-card au-o-box au-o-box--small au-u-margin-top-tiny">
          <div class="auk-form-group">
            <Auk::Label for="ministerName">
              Minister
            </Auk::Label>
            <Auk::Input
              data-test-route-search-mandatee-input
              @block={{true}}
              @value=""
              @enter=""
              id="ministerName"
            />
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="auk-o-grid-col-10">
    <div class="au-o-box au-o-box--small au-u-padding-left-none">
    {{#if this.model.length}}
      <div class="au-u-flex au-u-flex--no-wrap au-u-flex--spaced au-u-flex--between au-u-flex--vertical-center au-u-margin-bottom-small">
        <p class="au-u-muted">
          <strong class="au-u-medium">3</strong> resultaten voor <strong class="au-u-medium">"test"</strong> in <strong>kort bestek</strong>
        </p>
        <div>
          <AuLabel for="sort" class="au-u-hidden-visually">Sorteer op:</AuLabel>
          <select
            name="sort"
            id="sort"
            class="auk-select">
              <option
                value="relevantie"
                selected="selected"
              >
                Relevantie
              </option>
              <option
                value="datum-aflopend"
              >
                Datum aflopend
              </option>
          </select>
        </div>
      </div>
      <DataTable
        data-test-route-search-newsletter-infos-data-table={{true}}
        @content={{this.model}}
        @page={{this.page}}
        @noDataMessage={{t "no-results-found"}}
        @size={{this.size}}
        @sort={{this.sort}}
        @class="auk-card-table"
        @isLoading={{this.isLoadingModel}}
        as |table|
      >
        <table.content as |c|>
          <c.body class="auk-table--clickable-rows" as |row|>
            {{! each row has been processed to have 1 decision (object) as well as 1 latestAgendaitem (object)}}
            {{! see postProcess methods in route}}
            {{#let row.latestAgendaitem as |latestAgendaitem|}}
              <td>
                <AuCard
                  @shadow={{true}}
                  @size="small"
                  as |c|
                >
                  <c.header>
                    <p class="au-u-para-small au-u-muted au-u-medium">
                      {{moment-format latestAgendaitem.meetingDate}}
                    </p>
                    <AuHeading @level="3" @skin="4">
                      <AuLink
                        class="au-u-padding-none"
                        @route="agenda.agendaitems.agendaitem.news-item"
                        @models={{array
                          latestAgendaitem.meetingId
                          latestAgendaitem.agendaId
                          latestAgendaitem.id
                        }}>
                        {{row.title}}
                      </AuLink>
                    </AuHeading>
                  </c.header>
                  <c.content>
                    <p class="au-u-para"><SanitizeHtml @raw={{true}} @value={{row.richtext}} /></p>

                    <p class="au-u-para-small au-u-margin-top-tiny au-u-muted">
                      {{#each row.mandatees as |mandatee|}}
                        {{#let (concat mandatee.firstName " " mandatee.familyName) as |fullName|}}
                          {{fullName}}{{if (has-next mandatee row.mandatees) ", "}}
                        {{/let}}
                      {{/each}}
                    </p>
                  </c.content>
                </AuCard>
              </td>
              {{!-- <td data-test-route-search-newsletter-infos-row-title>


              <td data-test-route-search-newsletter-infos-row-mandatees>
                {{#each row.mandatees as |mandatee|}}
                  {{#let (concat mandatee.firstName " " mandatee.familyName) as |fullName|}}
                    {{fullName}}{{if (has-next mandatee row.mandatees) ", "}}
                  {{/let}}
                {{/each}}
              </td>

              <td
                data-test-route-search-newsletter-infos-row-go-to-agendaitem
                class="auk-u-text-align--right"
              >
                {{#if latestAgendaitem}}
                  <Auk::Button
                    @skin="borderless"
                    @layout="icon-only"
                    @icon="chevron-right"
                    @route="agenda.agendaitems.agendaitem.news-item"
                    @models={{array
                      latestAgendaitem.meetingId
                      latestAgendaitem.agendaId
                      latestAgendaitem.id
                    }}
                  />
                {{/if}}
              </td> --}}
            {{/let}}
          </c.body>
        </table.content>
      </DataTable>
    {{else}}
      {{#if this.emptySearch}}
        <WebComponents::VlAlert @message={{t "fill-in-search-term"}} />
      {{else}}
        <WebComponents::VlAlert
          @message={{t "no-results-found-modify-term"}}
        />
      {{/if}}
    {{/if}}
    </div>
  </div>
</div>