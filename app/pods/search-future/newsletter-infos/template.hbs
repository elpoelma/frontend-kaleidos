{{page-title (t "newsletter-info")}}
<div class="auk-o-grid auk-u-mb-2">
  <div class="auk-o-grid-col-2">
    <div class="au-u-margin-top-tiny">
      <AuHeading @level="3" @skin="6" class="au-u-hidden-visually">Inhoud</AuHeading>
      <AuList as |Item|>
        <Item class="au-c-list-item__divider"><AuLink @skin="button-naked" @route="search-future.all" @icon="arrow-right" @iconAlignment="right" class="au-c-button--naked-compact">Alle inhoud</AuLink></Item>
        <Item><AuLink @route="search-future.agenda-items" @skin="button-naked" @icon="arrow-right" @iconAlignment="right" class="au-c-button--naked-compact">Agendapunt</AuLink></Item>
        <Item><AuLink @route="search-future.cases" @skin="button-naked" @icon="arrow-right" @iconAlignment="right" class="au-c-button--naked-compact">Dossier</AuLink></Item>
        <Item><AuLink @route="search-future.documents" @skin="button-naked" @icon="arrow-right" @iconAlignment="right" class="au-c-button--naked-compact">Document</AuLink></Item>
        <Item><AuLink @route="search-future.decisions" @skin="button-naked" @icon="arrow-right" @iconAlignment="right" class="au-c-button--naked-compact">Beslissing</AuLink></Item>
        <Item><AuLink @route="search-future.newsletter-infos" @skin="button-naked" @icon="arrow-right" @iconAlignment="right" class="au-c-button--naked-compact" @active={{true}}>Kort bestek</AuLink></Item>
        <Item><AuLink @route="search-future.announcements" @skin="button-naked" @icon="arrow-right" @iconAlignment="right" class="au-c-button--naked-compact">Mededeling</AuLink></Item>
      </AuList>
    </div>
    <div class="au-c-card au-o-box au-o-box--small au-u-margin-top-small">
      <div class="auk-form-group auk-u-position-relative au-u-margin-bottom-small">
        <Auk::Label>{{t "from"}}</Auk::Label>
        <WebComponents::VlDatepicker
          @selectedDate={{array this.dateFromBuffer}}
          @dateChanged={{fn (mut this.dateFromBuffer)}}
          @enableClear={{this.dateFromBuffer}}
          @onClear={{fn (mut this.dateFromBuffer) null}}
          @allowInput={{true}}
        />
      </div>
      <div class="auk-form-group auk-u-position-relative">
        <Auk::Label>{{t "until-inclusive"}}</Auk::Label>
        <WebComponents::VlDatepicker
          @selectedDate={{array this.dateToBuffer}}
          @dateChanged={{fn (mut this.dateToBuffer)}}
          @enableClear={{this.dateToBuffer}}
          @onClear={{fn (mut this.dateToBuffer) null}}
          @allowInput={{true}}
        />
      </div>
    </div>
    <div class="au-c-card au-o-box au-o-box--small au-u-margin-top-tiny">
      <div class="auk-form-group">
        <Auk::Label for="ministerName">
          Minister/bevoegdheid
        </Auk::Label>
        <Auk::Input
          data-test-route-search-mandatee-input
          @block={{true}}
          @value=""
          @enter=""
          id="ministerName"
        />
      </div>
    </div>
    {{!-- <div class="au-c-card au-o-box au-o-box--small au-u-margin-top-tiny">
      <Auk::Label>Agenda versie</Auk::Label>
      <Auk::Checkbox
        @checked={{this.latestOnly}}
        @label="{{t "only-on-final-agenda"}}"
        {{on "input" this.toggleLatestOnly}}
      />
    </div> --}}

    {{!-- <div class="auk-box au-u-margin-top-small"> --}}
      {{!-- <div class="auk-u-mb-2">
        <Auk::Label>{{t "type"}}</Auk::Label>
        <Auk::Checkbox
          @checked={{this.includeNotas}}
          @label={{t "note"}}
          {{on "input" this.toggleIncludeNotas}}
        />
        <Auk::Checkbox
          @checked={{this.includeMededelingen}}
          @label={{capitalize (t "announcement")}}
          {{on "input" this.toggleIncludeMededelingen}}
        />
      </div> --}}

    {{!-- </div> --}}

  </div>
  <div class="auk-o-grid-col-10">
    {{#if this.model.length}}
      <div class="au-u-flex au-u-flex--no-wrap au-u-flex--spaced au-u-flex--between au-u-flex--vertical-center au-u-margin-bottom-small">
        <p class="au-u-muted">
          <strong class="au-u-medium">3</strong> resultaten voor <strong class="au-u-medium">"test"</strong> in <strong>kort bestek</strong>
        </p>
        <div>
          <AuLabel for="sort" class="au-u-hidden-visually">Sorteer op:</AuLabel>
          <select
            name="sort"
            id="sort"
            class="auk-select">
              <option
                value="relevantie"
                selected="selected"
              >
                Relevantie
              </option>
              <option
                value="datum-aflopend"
              >
                Datum aflopend
              </option>
          </select>
        </div>
      </div>
      <DataTable
        data-test-route-search-newsletter-infos-data-table={{true}}
        @content={{this.model}}
        @page={{this.page}}
        @noDataMessage={{t "no-results-found"}}
        @size={{this.size}}
        @sort={{this.sort}}
        @class="auk-card-table"
        @isLoading={{this.isLoadingModel}}
        as |table|
      >
        <table.content as |c|>
          <c.body class="auk-table--clickable-rows" as |row|>
            {{! each row has been processed to have 1 decision (object) as well as 1 latestAgendaitem (object)}}
            {{! see postProcess methods in route}}
            {{#let row.latestAgendaitem as |latestAgendaitem|}}
              <td>
                <AuCard
                  @shadow={{true}}
                  @size="small"
                  as |c|
                >
                  <c.header>
                    <p class="au-u-para-small au-u-muted au-u-medium">
                      {{moment-format latestAgendaitem.meetingDate}}
                    </p>
                    <AuHeading @level="3" @skin="4">
                      <AuLink
                        class="au-u-padding-none"
                        @route="agenda.agendaitems.agendaitem.news-item"
                        @models={{array
                          latestAgendaitem.meetingId
                          latestAgendaitem.agendaId
                          latestAgendaitem.id
                        }}>
                        {{row.title}}
                      </AuLink>
                    </AuHeading>
                  </c.header>
                  <c.content>
                    <p class="au-u-para"><SanitizeHtml @raw={{true}} @value={{row.richtext}} /></p>

                    <p class="au-u-para-small au-u-margin-top-tiny au-u-muted">
                      {{#each row.mandatees as |mandatee|}}
                        {{#let (concat mandatee.firstName " " mandatee.familyName) as |fullName|}}
                          {{fullName}}{{if (has-next mandatee row.mandatees) ", "}}
                        {{/let}}
                      {{/each}}
                    </p>
                  </c.content>
                </AuCard>
              </td>
              {{!-- <td data-test-route-search-newsletter-infos-row-title>


              <td data-test-route-search-newsletter-infos-row-mandatees>
                {{#each row.mandatees as |mandatee|}}
                  {{#let (concat mandatee.firstName " " mandatee.familyName) as |fullName|}}
                    {{fullName}}{{if (has-next mandatee row.mandatees) ", "}}
                  {{/let}}
                {{/each}}
              </td>

              <td
                data-test-route-search-newsletter-infos-row-go-to-agendaitem
                class="auk-u-text-align--right"
              >
                {{#if latestAgendaitem}}
                  <Auk::Button
                    @skin="borderless"
                    @layout="icon-only"
                    @icon="chevron-right"
                    @route="agenda.agendaitems.agendaitem.news-item"
                    @models={{array
                      latestAgendaitem.meetingId
                      latestAgendaitem.agendaId
                      latestAgendaitem.id
                    }}
                  />
                {{/if}}
              </td> --}}
            {{/let}}
          </c.body>
        </table.content>
      </DataTable>
    {{else}}
      {{#if this.emptySearch}}
        <WebComponents::VlAlert @message={{t "fill-in-search-term"}} />
      {{else}}
        <WebComponents::VlAlert
          @message={{t "no-results-found-modify-term"}}
        />
      {{/if}}
    {{/if}}
  </div>
</div>