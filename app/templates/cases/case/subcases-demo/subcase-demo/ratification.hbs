{{#if this.model}}
  <div id="case">
    <SubcaseDemo::SubcaseTitlesPanel
      @subcase={{@model.subcase}}
      @meeting={{this.meeting}}
      @allowEditing={{user-may "manage-cases"}}
      @step="Bekrachtiging"
      @status="Nog geen beslissing ingesteld"
    />
  </div>
  {{!-- <Mandatees::MandateesPanel
    @referenceDate={{if
      this.meeting
      this.meeting.plannedStart
      this.model.subcase.created
    }}
    @mandatees={{this.mandatees}}
    @submitter={{this.submitter}}
    @emptyStateMessage={{if this.showMandateesNotApplicableMessage (t "not-applicable")}}
    @allowEditing={{user-may "manage-cases"}}
    @onSave={{this.saveMandateeData}}
  /> --}}
  <Utils::GovernmentAreas::GovernmentAreasPanel
    @referenceDate={{or this.meeting.plannedStart this.agenda.created @model.subcase.created}}
    @governmentAreas={{@model.subcase.governmentAreas}}
    @allowEditing={{user-may "manage-cases"}}
    @onSave={{this.saveGovernmentAreas}}
    @ratification={{true}}
  />

  {{!-- Documents --}}
  <div id="documents" class="auk-u-mb-4 c-linked-documents">
    <Auk::Panel data-test-subcase-description-panel>
      <Auk::Panel::Header>
        <Auk::Toolbar>
          <Auk::Toolbar::Group @position="left">
            <Auk::Toolbar::Item>
              <div class="au-u-flex au-u-flex--spaced-small">
                <h4 class="auk-panel__title">
                  {{t "documents"}}
                </h4>
              </div>
            </Auk::Toolbar::Item>
          </Auk::Toolbar::Group>
        </Auk::Toolbar>
      </Auk::Panel::Header>
      <Auk::Panel::Body class="c-document-panel">
        {{#if this.documentsAreVisible}}
          <Documents::DocumentCardList
            @pieces={{this.model.pieces}}
            @onAddPiece={{perform this.addPiece}}
            @didDeleteContainer={{this.refresh}}
            @isEditable={{true}}
          />
        {{else}}
          <div>
            <AuAlert
              @skin="info"
              @icon="info-circle"
              class="au-u-margin-bottom-none"
            >
              {{t "no-documents-yet"}}
            </AuAlert>
          </div>
        {{/if}}
      </Auk::Panel::Body>
      {{#if (user-may "manage-documents")}}

      <Auk::Panel::Footer>
        <AuButton
          data-test-route-cases---subcase-documents-add
          @skin="naked"
          @icon="plus"
          class="au-u-padding-left-none"
          {{on "click" this.openPieceUploadModal}}
        >
          {{t "documents-add"}}
        </AuButton>
      </Auk::Panel::Footer>
      {{/if}}
    </Auk::Panel>
  </div>

  <Documents::LinkedDocumentsPanel @agendaitemOrSubcase={{this.subcase}} class="c-linked-documents" />

  <div id="agenda">
     <Subcase::SubcaseVersionsPanel @subcase={{@model.subcase}} @demo={{true}} @step="Definitieve goedkeuring" />
  </div>


{{/if}}

<ConfirmationModal
  @modalOpen={{this.isOpenPieceUploadModal}}
  @title={{t "document-add"}}
  @onConfirm={{perform this.savePieces}}
  @onCancel={{perform this.cancelUploadPieces}}
  @confirmMessage={{t "documents-add"}}
  @disabled={{eq this.newPieces.length 0}}
  @loading={{this.savePieces.isRunning}}
>
  <:body>
    {{#if this.savePieces.isRunning}}
      <WebComponents::VlLoader @text={{t "documents-loading-text"}} />
    {{else}}
      <Auk::FileUploader
        @multiple={{true}}
        @reusable={{true}}
        @onUpload={{this.uploadPiece}}
      />
      <div class="upload-container">
        {{#each this.newPieces as |piece|}}
          <Documents::UploadedDocument
            @piece={{piece}}
            @allowDocumentContainerEdit={{true}}
            @onDelete={{perform this.deletePiece piece}} />
        {{/each}}
      </div>
    {{/if}}
  </:body>
</ConfirmationModal>

{{#if this.isOpenBatchDetailsModal}}
  <Documents::BatchDetails::BatchDocumentsDetailsModal
    @pieces={{this.model.pieces}}
    @didDeletePiece={{this.setPreviousPiecesFromAgendaitem}}
    @onCancel={{this.cancelBatchDetails}}
    @onSave={{this.saveBatchDetails}}
  />
{{/if}}

{{#if this.vpModal}}
<Auk::Modal @size="medium">
  <Auk::Modal::Header
    @title="Verzonden op 22 november 2023"
    @onClose={{this.showVpModal}}
  />
  <Auk::Modal::Body>
    <AuContent>
      <p>Vink de documenten aan die verstuurd mogen worden naar het Vlaams Parlement</p>
      <AuHeading @skin="6" @level="3" class="au-u-margin-top">Principiële goedkeuring:</AuHeading>
      <div class="au-c-control-group">
        <AuCheckbox
          @checked={{true}}
        >
          <AuLinkExternal href="#!">VR 2023 0707 DOC.0919-2 Decreet dienstencheques - decreetBIS (PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{true}}
        >
          <AuLinkExternal href="#!">VR 2023 0707 DOC.0919-3 Decreet dienstencheques - memorieTER (PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{true}}
        >
          <AuLinkExternal href="#!">VR 2023 0707 DOC.0919-1 Decreet dienstencheques - notaBIS (PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{true}}
        >
          <AuLinkExternal href="#!">VR PV 2023/31 - PUNT 0085 (PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{true}}
        >
          <AuLinkExternal href="#!">VR 2023 0707 DOC.0919-4 Decreet dienstencheques - IF (PDF)</AuLinkExternal>
        </AuCheckbox>
      </div>

      <AuHeading @skin="6" @level="3" class="au-u-margin-top">Principiële goedkeuring:</AuHeading>
      <div class="au-c-control-group">
        <AuCheckbox
          @checked={{true}}
        >
          <AuLinkExternal href="#!">VR 2023 1310 DOC.1311-1 Decreet dienstencheques - nota (PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{true}}
        >
          <AuLinkExternal href="#!">VR PV 2023/40 - PUNT 0011 (PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{false}}
        >
          <AuLinkExternal href="#!">VR 2023 1310 DOC.1311-4 Decreet dienstencheques - advies (PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{true}}
        >
          <AuLinkExternal href="#!">VR 2023 1310 DOC.1311-2 Decreet dienstencheques - decreet (PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{false}}
        >
          <AuLinkExternal href="#!">VR 2023 1310 DOC.1311-5 Decreet dienstencheques advies (PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{true}}
        >
          <AuLinkExternal href="#!">VR 2023 1310 DOC.1311-3 Decreet dienstencheques - memorie (PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{false}}
        >
          <AuLinkExternal href="#!">VR 2023 1310 DOC.1311-6 Decreet dienstencheques - advies (PDF)</AuLinkExternal>
        </AuCheckbox>
      </div>

      <AuHeading @skin="6" @level="3" class="au-u-margin-top">Definitieve goedkeuring:</AuHeading>
      <div class="au-c-control-group">
        <AuCheckbox
          @checked={{true}}
        >
          <AuLinkExternal href="#!">VR 2024 2302 DOC.0200-2 Decreet dienstencheques - decreet (Word en PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{true}}
        >
          <AuLinkExternal href="#!">VR 2024 2302 DOC.0200-3 Decreet dienstencheques - memorie (Word en ondertekende PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{true}}
        >
          <AuLinkExternal href="#!">VR 2024 2302 DOC.0200-1 Decreet dienstencheques - nota (PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{false}}
        >
          <AuLinkExternal href="#!">VR PV 2024/8 - punt 0016 (ondertekende PDF)</AuLinkExternal>
        </AuCheckbox>
        <AuCheckbox
          @checked={{false}}
        >
          <AuLinkExternal href="#!">VR 2024 2302 DOC.0200-4 Decreet dienstencheques - advies (PDF)</AuLinkExternal>
        </AuCheckbox>
      </div>

      <div class="auk-form-group au-u-margin-top au-u-margin-bottom">
        <Auk::Label for="remarks">Opmerkingen</Auk::Label>
        <Auk::Textarea
          @rows="4"
          @value=""
          id="remarks"
        />
      </div>
    </AuContent>
    <AuCard
      @shadow={{false}}
      @standOut={{true}}
      @size="small"
      @expandable={{true}}
      as |c|
    >
      <c.header>
        <AuHeading @level="3" @skin="6">
          Mogelijks zijn er nog documenten te kort, kijk je even mee?
        </AuHeading>
      </c.header>
      <c.content>
        <p>We deden een automatische check, misschien moet één van volgende documenten toch mee?</p>
        <ul class="au-u-margin-top-small">
          <li>
            <AuLinkExternal href="#!">VR 2024 2302 DOC.0200-2 Decreet dienstencheques - decreet (ondertekende PDF)</AuLinkExternal>
          </li>
        </ul>
      </c.content>
    </AuCard>
  </Auk::Modal::Body>
</Auk::Modal>
{{/if}}