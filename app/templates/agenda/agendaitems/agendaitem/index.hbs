{{#let this.model.treatment.decisionActivity.decisionResultCode as |resultCode|}}
  {{#if resultCode.isRetracted}}
    <Auk::Alert @skin="warning" @message={{t "retracted-item"}}/>
  {{else if resultCode.isPostponed}}
    <div class="auk-alert auk-alert--warning">
      <div class="auk-alert__body">
        <Auk::Badge @icon="alert-triangle" @skin={{"warning"}}/>
        <div class="auk-alert__text">
          <p class="auk-u-text-pre-line auk-alert__message">{{t "postponed-item"}}</p>
        </div>
      </div>
      {{!-- TODO KAS-3565 figure out a way to know if already reproposed--}}
      {{!-- Maybe if there is only 1 activity then always ok , with multiple ones,
        check if there is a activity with a startdate greater then meeting planned start? 
        or just the last thing? should always work.
      --}}
      {{!-- {{#if this.meeting.internalDecisionPublicationActivity.startDate}} --}}
      {{#if true}}
        <Auk::DropdownMenu
          @skin="primary"
          @label={{"Opnieuw agenderen"}}
        as |Menu|>
        {{#if this.proposableMeetings.length}}
          {{#each this.proposableMeetings as |meeting|}}
            <Menu.Item
              {{on "click" (fn this.reProposeForAgenda meeting)}}
            >
              {{t "agenda-for"}}
              {{moment-format meeting.plannedStart "DD MMMM YYYY"}}
              {{concat " - " meeting.numberRepresentation}}
            </Menu.Item>
          {{/each}}
          {{else}}
          laden
          {{/if}}
          {{!-- {{#if (gt this.proposableMeetings.length 0)}}
            <Menu.Divider />
          {{/if}} --}}
          {{!-- <Menu.Item {{on "click" (fn this.proposeForOtherAgenda this.subcase)}}>
            {{t "other-agenda"}}
          </Menu.Item> --}}
        </Auk::DropdownMenu>
      {{/if}}
    </div>
  {{/if}}
{{/let}}

{{!-- TODO KAS-3565 separate component for this alert and co? getting a bit much --}}

<Auk::Toolbar class="auk-u-mb-4" as |Toolbar|>
  <Toolbar.Group @position="left" as |Group|>
    <Group.Item>
      <h3 class="auk-toolbar__title">
        {{t "agendaitem-case"}}
      </h3>
    </Group.Item>
  </Toolbar.Group>
  <Toolbar.Group @position="right" as |Group|>
    <Group.Item>
      {{#if (user-may "manage-agendaitems")}}
        {{#if (not this.agenda.status.isFinal)}}
          <Agenda::Agendaitem::AgendaitemControls
            @agendaitem={{this.model}}
            @agendaActivity={{this.agendaActivity}}
            @currentAgenda={{this.agenda}}
            @reverseSortedAgendas={{this.reverseSortedAgendas}}
            @onDeleteAgendaitem={{this.reassignNumbersAndNavigateToNeighbouringAgendaitem}}
          />
        {{/if}}
      {{/if}}
    </Group.Item>
  </Toolbar.Group>
</Auk::Toolbar>

<Agenda::Agendaitem::AgendaitemCasePanel
  @agendaitem={{this.model}}
  @subcase={{this.subcase}}
  @agenda={{this.agenda}}
  @newsletterInfo={{this.newsletterInfo}}
  @allowEditing={{user-may "manage-agendaitems"}}
/>
{{#if (is-announcement @model.type)}}
  <Mandatees::MandateesPanel
    @referenceDate={{this.meeting.plannedStart}}
    @mandatees={{this.mandatees}}
    @submitter={{this.submitter}}
    @allowEditing={{user-may "manage-agendaitems"}}
    @onSave={{this.saveMandateeData}}
  />
{{else if this.subcase}}
  <Mandatees::MandateesPanel
    @referenceDate={{this.meeting.plannedStart}}
    @mandatees={{this.mandatees}}
    @submitter={{this.submitter}}
    @allowEditing={{user-may "manage-agendaitems"}}
    @onSave={{this.saveMandateeData}}
  />
  <Utils::GovernmentAreas::GovernmentAreasPanel
    @governmentAreas={{this.subcase.governmentAreas}}
    @allowEditing={{user-may "manage-agendaitems"}}
    @onSave={{this.saveGovernmentAreas}}
  />
{{/if}}