{{!-- TODO: octane-refactor --}}
{{!-- template-lint-disable no-action --}}
<div class="auk-u-m-8">
  <div class=""></div>
  <Utils::AgendaitemTable
    @model={{await this.model}}
    @sort={{this.sort}}
    @page={{this.page}}
    @filter={{this.filter}}
    @include={{this.include}}
    @size={{this.size}}
    @columns={{this.columns}}
    as |agendaitemRow|
  >
    {{#if (is-pending agendaitemRow.treatment)}}
      <WebComponents::VlLoader @text={{t "decisions-loading-text"}} />
    {{else}}
      <div class="auk-u-m-8">
        <div class="auk-u-mb-4">
          <Auk::Toolbar>
            <Auk::Toolbar::Group @position="center">
              <Auk::Toolbar::Item>
                <Auk::Button
                  @skin="secondary"
                  @icon="plus"
                  {{action "addTreatment" agendaitemRow}}
                >
                  {{t "add-decision"}}
                </Auk::Button>
              </Auk::Toolbar::Item>
            </Auk::Toolbar::Group>
          </Auk::Toolbar>
        </div>
        {{#let (await agendaitemRow.content.agendaActivity.subcase) as |subcase|}}
          <Agenda::Agendaitem::AgendaitemDecision
            @subcase={{subcase}}
            @isTableRow={{true}}
            @treatment={{await agendaitemRow.treatment}}
            @agendaitem={{await agendaitemRow.content}}
          />
        {{/let}}
      </div>
    {{/if}}
  </Utils::AgendaitemTable>
</div>
{{outlet}}